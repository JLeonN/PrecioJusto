# RESUMEN GENERAL - PRECIO JUSTO

## PROPÃ“SITO
Este documento proporciona una visiÃ³n general completa de Precio Justo, incluyendo su arquitectura, tecnologÃ­as, estructura de archivos y funcionalidades principales. EstÃ¡ diseÃ±ado para que desarrolladores y asistentes de IA comprendan rÃ¡pidamente el proyecto.

---

## 1. DESCRIPCIÃ“N DEL PROYECTO
**Precio Justo** es una aplicaciÃ³n mÃ³vil para Android que permite a los usuarios uruguayos:
- Registrar precios de productos en diferentes comercios
- Comparar precios entre comercios
- Encontrar las mejores ofertas
- Contribuir a una base de datos colaborativa de precios

La app estÃ¡ desarrollada con **Vue.js 3**, **Quasar Framework** y **Capacitor**, siguiendo una arquitectura modular y escalable.

---

## 2. TECNOLOGÃAS Y STACK

### Frontend
- **Vue.js 3** (Composition API con `<script setup>`)
- **Quasar Framework v2** (componentes UI y utilidades)
- **JavaScript** (sin TypeScript)

### Mobile
- **Capacitor** (wrapper para Android)
- **Capacitor Storage** (almacenamiento local)

### Estado y Datos
- **Pinia** (gestiÃ³n de estado global)
- **PatrÃ³n Strategy** (adaptadores de almacenamiento)

### APIs Externas
- **Open Food Facts API** (informaciÃ³n de productos por cÃ³digo de barras)

### Iconos
- **Tabler Icons** (sistema de iconos consistente)

---

## 3. ARQUITECTURA

### PatrÃ³n de 3 Capas
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Capa de PresentaciÃ³n (Vue)        â”‚  â† Componentes, PÃ¡ginas
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Capa de Estado (Pinia Stores)     â”‚  â† Estado reactivo global
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Capa de Negocio (Services)        â”‚  â† LÃ³gica, validaciones
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Capa de Datos (Adapters)          â”‚  â† AbstracciÃ³n de storage
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Flujo de Datos
1. **Usuario interactÃºa** con componente Vue
2. **Componente llama** a mÃ©todo del Store (Pinia)
3. **Store ejecuta** lÃ³gica en Service
4. **Service usa** Adapter para persistir datos
5. **Adapter interactÃºa** con Capacitor Storage
6. **Estado se actualiza** reactivamente en la UI

---

## 4. ESTRUCTURA DE ARCHIVOS
```
PrecioJusto/
â”‚
â”œâ”€â”€ public/                                 # Archivos pÃºblicos estÃ¡ticos
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ icons/                             # Iconos de la app
â”‚
â”œâ”€â”€ src/
â”‚   â”‚
â”‚   â”œâ”€â”€ adapters/                          # Capa de abstracciÃ³n de almacenamiento
â”‚   â”‚   â”œâ”€â”€ StorageAdapter.js              # Interfaz base (patrÃ³n Strategy)
â”‚   â”‚   â””â”€â”€ CapacitorStorageAdapter.js     # ImplementaciÃ³n con Capacitor Storage
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                        # Componentes reutilizables
â”‚   â”‚   â””â”€â”€ Tarjetas/                      # Componentes de tarjetas
â”‚   â”‚       â”œâ”€â”€ TarjetaProducto.vue        # Tarjeta expandible de producto con precios
â”‚   â”‚       â”œâ”€â”€ TarjetaComercio.vue        # Tarjeta de comercio con info y acciones
â”‚   â”‚       â””â”€â”€ TarjetaPrecio.vue          # Tarjeta de precio individual con confirmaciones
â”‚   â”‚
â”‚   â”œâ”€â”€ css/                               # Estilos globales
â”‚   â”‚   â”œâ”€â”€ app.scss                       # Estilos principales de la aplicaciÃ³n
â”‚   â”‚   â””â”€â”€ quasar.variables.scss          # Variables personalizadas de Quasar (colores, etc.)
â”‚   â”‚
â”‚   â”œâ”€â”€ layouts/                           # Layouts de pÃ¡ginas
â”‚   â”‚   â””â”€â”€ MainLayout.vue                 # Layout principal con drawer de navegaciÃ³n
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                             # PÃ¡ginas de la aplicaciÃ³n
â”‚   â”‚   â”œâ”€â”€ IndexPage.vue                  # PÃ¡gina de inicio/bienvenida
â”‚   â”‚   â”œâ”€â”€ ProductosPage.vue              # Listado de productos con FAB
â”‚   â”‚   â”œâ”€â”€ AgregarProductoPage.vue        # Formulario para agregar productos
â”‚   â”‚   â”œâ”€â”€ ComerciosPage.vue              # Listado de comercios con FAB
â”‚   â”‚   â””â”€â”€ AgregarComercioPage.vue        # Formulario para agregar comercios
â”‚   â”‚
â”‚   â”œâ”€â”€ router/                            # ConfiguraciÃ³n de enrutamiento
â”‚   â”‚   â”œâ”€â”€ index.js                       # ConfiguraciÃ³n de Vue Router
â”‚   â”‚   â””â”€â”€ routes.js                      # DefiniciÃ³n de todas las rutas
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                          # Servicios de lÃ³gica de negocio
â”‚   â”‚   â”œâ”€â”€ ProductosService.js            # CRUD y validaciones de productos
â”‚   â”‚   â”œâ”€â”€ ComerciosService.js            # CRUD y validaciÃ³n de duplicados de comercios
â”‚   â”‚   â””â”€â”€ OpenFoodFactsService.js        # IntegraciÃ³n con API Open Food Facts
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/                            # Stores de Pinia (estado global)
â”‚   â”‚   â”œâ”€â”€ productosStore.js              # Estado y acciones de productos
â”‚   â”‚   â”œâ”€â”€ comerciosStore.js              # Estado y acciones de comercios
â”‚   â”‚   â””â”€â”€ preferenciaStore.js            # Estado y acciones de preferencias de usuario
â”‚   â”‚
â”‚   â”œâ”€â”€ App.vue                            # Componente raÃ­z de Vue
â”‚   â””â”€â”€ main.js                            # Punto de entrada de la aplicaciÃ³n
â”‚
â”œâ”€â”€ src-capacitor/                         # Archivos especÃ­ficos de Capacitor
â”‚   â”œâ”€â”€ android/                           # Proyecto Android nativo
â”‚   â””â”€â”€ capacitor.config.json              # ConfiguraciÃ³n de Capacitor
â”‚
â”œâ”€â”€ .editorconfig                          # ConfiguraciÃ³n de editor
â”œâ”€â”€ .eslintrc.cjs                          # ConfiguraciÃ³n de ESLint
â”œâ”€â”€ .gitignore                             # Archivos ignorados por Git
â”œâ”€â”€ .prettierrc                            # ConfiguraciÃ³n de Prettier
â”œâ”€â”€ .vscode/                               # ConfiguraciÃ³n de VS Code
â”‚   â”œâ”€â”€ extensions.json                    # Extensiones recomendadas
â”‚   â””â”€â”€ settings.json                      # ConfiguraciÃ³n del workspace
â”œâ”€â”€ babel.config.cjs                       # ConfiguraciÃ³n de Babel
â”œâ”€â”€ jsconfig.json                          # ConfiguraciÃ³n de JavaScript
â”œâ”€â”€ package.json                           # Dependencias y scripts del proyecto
â”œâ”€â”€ package-lock.json                      # Lock de versiones de dependencias
â”œâ”€â”€ quasar.config.js                       # ConfiguraciÃ³n principal de Quasar
â”œâ”€â”€ README.md                              # DocumentaciÃ³n del proyecto
â”‚
â””â”€â”€ Documentacion/                         # DocumentaciÃ³n del proyecto
    â”œâ”€â”€ Resumen1General.txt                # Este archivo
    â”œâ”€â”€ Resumen2Tarjetas.txt               # DocumentaciÃ³n de componentes de tarjetas
    â”œâ”€â”€ Resumen3OpenFoodFacts.txt          # DocumentaciÃ³n de integraciÃ³n API
    â”œâ”€â”€ Resumen4LocalStorage.txt           # DocumentaciÃ³n de almacenamiento
    â””â”€â”€ ResumenSeccionComercios.txt        # DocumentaciÃ³n de secciÃ³n comercios
```

---

## 5. FUNCIONALIDADES IMPLEMENTADAS

### A. GestiÃ³n de Productos
- âœ… Registro manual de productos
- âœ… BÃºsqueda por cÃ³digo de barras (Open Food Facts)
- âœ… BÃºsqueda por nombre y marca (Open Food Facts)
- âœ… Autocompletado de datos (nombre, marca, imagen, categorÃ­a)
- âœ… Registro de precios con mÃºltiples monedas (UYU, USD, EUR, ARS, BRL)
- âœ… ValidaciÃ³n de cantidades y unidades (kg, g, L, mL, unidades)
- âœ… Sistema de confirmaciones comunitarias para precios
- âœ… VisualizaciÃ³n de top 3 precios mÃ¡s bajos por producto
- âœ… Tarjetas expandibles con detalles completos
- âœ… Formato de fechas relativo (hace 2 dÃ­as, hace 1 mes)
- âœ… Click-to-copy en cÃ³digos de barras

### B. GestiÃ³n de Comercios
- âœ… Registro de comercios con formulario completo
- âœ… ValidaciÃ³n de duplicados con algoritmo inteligente
- âœ… DetecciÃ³n de nombres similares (Levenshtein distance)
- âœ… DetecciÃ³n de direcciones cercanas
- âœ… Tipos de comercio: Supermercado, AlmacÃ©n, Mayorista, Farmacia, Kiosco, Online, Otro
- âœ… Campos: nombre, tipo, direcciÃ³n, telÃ©fono, logo/foto
- âœ… Tarjetas visuales con informaciÃ³n completa
- âœ… BotÃ³n de llamada directa desde la tarjeta

### C. Preferencias de Usuario
- âœ… ConfiguraciÃ³n de moneda preferida (UYU por defecto)
- âœ… SelecciÃ³n de idioma (espaÃ±ol por defecto, inglÃ©s disponible)
- âœ… Toggle para requerir confirmaciones en acciones destructivas
- âœ… Persistencia automÃ¡tica de preferencias
- âœ… SincronizaciÃ³n reactiva con toda la UI

### D. Sistema de Almacenamiento
- âœ… PatrÃ³n Strategy con adaptadores intercambiables
- âœ… ImplementaciÃ³n actual: CapacitorStorageAdapter (local)
- âœ… Preparado para migraciÃ³n futura a Firebase/Firestore
- âœ… MÃ©todos estÃ¡ndar: obtenerTodos, obtenerPorId, crear, actualizar, eliminar, existe

---

## 6. STORES DE PINIA

### productosStore.js
**Estado:**
- `productos`: Array de productos
- `cargando`: Boolean de estado de carga
- `error`: String de mensaje de error

**Acciones:**
- `cargarProductos()`: Carga todos los productos desde storage
- `agregarProducto(producto)`: Agrega un nuevo producto
- `actualizarProducto(id, datos)`: Actualiza producto existente
- `eliminarProducto(id)`: Elimina un producto

**Getters:**
- `productosOrdenados`: Productos ordenados alfabÃ©ticamente
- `obtenerProductoPorId(id)`: Busca producto por ID

### comerciosStore.js
**Estado:**
- `comercios`: Array de comercios
- `cargando`: Boolean de estado de carga
- `error`: String de mensaje de error

**Acciones:**
- `cargarComercios()`: Carga todos los comercios desde storage
- `agregarComercio(comercio)`: Agrega un nuevo comercio
- `actualizarComercio(id, datos)`: Actualiza comercio existente
- `eliminarComercio(id)`: Elimina un comercio

**Getters:**
- `comerciosOrdenados`: Comercios ordenados alfabÃ©ticamente
- `obtenerComercioPorId(id)`: Busca comercio por ID
- `obtenerComerciosSimilares(nombre, direccion)`: Detecta duplicados potenciales

### preferenciaStore.js
**Estado:**
- `idioma`: String del idioma seleccionado ('es' o 'en')
- `moneda`: String de la moneda preferida ('UYU', 'USD', 'EUR', 'ARS', 'BRL')
- `requiereConfirmacion`: Boolean para confirmaciones en acciones

**Acciones:**
- `cargarPreferencias()`: Carga preferencias desde storage
- `actualizarPreferencia(clave, valor)`: Actualiza una preferencia especÃ­fica

**CaracterÃ­sticas:**
- Persistencia automÃ¡tica en cada cambio
- Valores por defecto: espaÃ±ol, UYU, confirmaciÃ³n activada

---

## 7. SERVICIOS

### ProductosService.js
**Responsabilidades:**
- CRUD completo de productos
- Validaciones de datos (nombre, precio, cantidad, unidad)
- GestiÃ³n de precios asociados a productos
- IntegraciÃ³n con productosStore

**MÃ©todos principales:**
- `obtenerTodos()`: Obtiene todos los productos
- `obtenerPorId(id)`: Obtiene un producto especÃ­fico
- `crear(producto)`: Crea un nuevo producto
- `actualizar(id, datos)`: Actualiza producto existente
- `eliminar(id)`: Elimina un producto

### ComerciosService.js
**Responsabilidades:**
- CRUD completo de comercios
- ValidaciÃ³n de duplicados con algoritmo de similitud
- DetecciÃ³n de nombres similares (Levenshtein distance < 3)
- DetecciÃ³n de direcciones cercanas (similitud > 80%)
- IntegraciÃ³n con comerciosStore

**MÃ©todos principales:**
- `obtenerTodos()`: Obtiene todos los comercios
- `obtenerPorId(id)`: Obtiene un comercio especÃ­fico
- `crear(comercio)`: Crea un nuevo comercio (con validaciÃ³n de duplicados)
- `actualizar(id, datos)`: Actualiza comercio existente
- `eliminar(id)`: Elimina un comercio
- `buscarSimilares(nombre, direccion)`: Detecta comercios similares

### OpenFoodFactsService.js
**Responsabilidades:**
- IntegraciÃ³n con Open Food Facts API
- BÃºsqueda por cÃ³digo de barras
- BÃºsqueda por nombre y marca
- TransformaciÃ³n de datos de API a formato local
- Manejo de mÃºltiples resultados

**MÃ©todos principales:**
- `buscarPorCodigoBarras(codigo)`: Busca producto por cÃ³digo de barras
- `buscarPorNombreYMarca(nombre, marca)`: Busca productos por texto

---

## 8. COMPONENTES PRINCIPALES

### TarjetaProducto.vue
**PropÃ³sito:** Mostrar productos con sus precios en formato de tarjeta expandible

**Props:**
- `producto`: Object (requerido) - Datos del producto

**CaracterÃ­sticas:**
- Muestra top 3 precios mÃ¡s bajos
- Expandible para ver todos los detalles
- Imagen del producto (o placeholder)
- CÃ³digo de barras con click-to-copy
- Fecha relativa de Ãºltimo precio
- Indicador de ahorro (diferencia entre precio mÃ¡s bajo y mÃ¡s alto)

### TarjetaComercio.vue
**PropÃ³sito:** Mostrar comercios en formato de tarjeta

**Props:**
- `comercio`: Object (requerido) - Datos del comercio

**CaracterÃ­sticas:**
- Logo/foto del comercio (o icono por defecto)
- Tipo de comercio con badge
- DirecciÃ³n completa
- BotÃ³n de llamada directa (si tiene telÃ©fono)

### TarjetaPrecio.vue
**PropÃ³sito:** Mostrar detalles de un precio individual

**Props:**
- `precio`: Object (requerido) - Datos del precio

**CaracterÃ­sticas:**
- Comercio donde se registrÃ³
- Monto con moneda
- Fecha relativa
- Contador de confirmaciones comunitarias
- Botones de acciÃ³n (confirmar, editar, eliminar)

---

## 9. PÃGINAS

### IndexPage.vue
**Ruta:** `/`
**PropÃ³sito:** PÃ¡gina de inicio/bienvenida

### ProductosPage.vue
**Ruta:** `/productos`
**PropÃ³sito:** Listado completo de productos

**CaracterÃ­sticas:**
- Lista de TarjetaProducto
- Floating Action Button para agregar producto
- Carga desde productosStore

### AgregarProductoPage.vue
**Ruta:** `/productos/agregar`
**PropÃ³sito:** Formulario para agregar nuevo producto

**CaracterÃ­sticas:**
- BÃºsqueda por cÃ³digo de barras (Open Food Facts)
- BÃºsqueda por nombre y marca
- Formulario manual completo
- ValidaciÃ³n de datos
- Soporte multimoneda

### ComerciosPage.vue
**Ruta:** `/comercios`
**PropÃ³sito:** Listado completo de comercios

**CaracterÃ­sticas:**
- Lista de TarjetaComercio
- Floating Action Button para agregar comercio
- Carga desde comerciosStore

### AgregarComercioPage.vue
**Ruta:** `/comercios/agregar`
**PropÃ³sito:** Formulario para agregar nuevo comercio

**CaracterÃ­sticas:**
- ValidaciÃ³n de duplicados
- Alerta de comercios similares
- SelecciÃ³n de tipo de comercio
- Campos opcionales (telÃ©fono, logo)

---

## 10. NAVEGACIÃ“N (Router)

### ConfiguraciÃ³n
- **Modo:** History (URLs limpias sin #)
- **Layout:** MainLayout para todas las rutas

### Rutas Definidas
```javascript
[
  {
    path: '/',
    component: MainLayout,
    children: [
      { path: '', component: IndexPage },
      { path: 'productos', component: ProductosPage },
      { path: 'productos/agregar', component: AgregarProductoPage },
      { path: 'comercios', component: ComerciosPage },
      { path: 'comercios/agregar', component: AgregarComercioPage }
    ]
  }
]
```

---

## 11. COLORES Y DISEÃ‘O

### Paleta de Colores (quasar.variables.scss)
- **$primary:** #1976D2 (Azul oscuro) - Color principal de la app
- **$secondary:** #4CAF50 (Verde) - Indicadores de ahorro y Ã©xito
- **$accent:** #FF9800 (Naranja) - Alertas y advertencias
- **$dark:** #1D1D1D - Modo oscuro
- **$positive:** #4CAF50 (Verde) - Acciones positivas
- **$negative:** #C10015 (Rojo) - Errores y eliminaciones
- **$info:** #31CCEC (Cian) - InformaciÃ³n
- **$warning:** #F2C037 (Amarillo) - Advertencias

### Principios de DiseÃ±o
- Mobile-first (optimizado para portrait)
- Tarjetas como unidad visual principal
- Floating Action Buttons para acciones principales
- Iconos Tabler para consistencia visual
- Espaciado generoso para tÃ¡ctil

---

## 12. CONVENCIONES DE CÃ“DIGO

### Nomenclatura
- **Carpetas y Archivos:** PascalCase
  - `GestionUsuarios/`, `TarjetaProducto.vue`
- **Variables y Funciones:** camelCase en espaÃ±ol
  - `nombreProducto`, `calcularPrecioPromedio()`
- **Componentes:** PascalCase
  - `TarjetaProducto`, `BotonPrimario`
- **Stores:** camelCase con sufijo "Store"
  - `productosStore`, `comerciosStore`
- **Services:** PascalCase con sufijo "Service"
  - `ProductosService`, `ComerciosService`

### Estilo de CÃ³digo
- Vue 3 Composition API con `<script setup>`
- JavaScript (no TypeScript)
- CÃ³digo limpio con mÃ­nimos comentarios
- Props tipadas con validaciÃ³n
- Emits declarados explÃ­citamente
- Imports organizados: externos primero, luego internos

---

## 13. ROADMAP Y FASES

### Fase 1: MVP Local (Mayormente Completada)
- âœ… CRUD de productos y comercios
- âœ… IntegraciÃ³n con Open Food Facts
- âœ… Sistema de preferencias
- âœ… ValidaciÃ³n de duplicados en comercios
- ğŸ”„ BÃºsqueda local inteligente (En progreso)
- â³ Escaneo de cÃ³digo de barras con cÃ¡mara (Pendiente - Stage 4)

### Fase 2: Funcionalidades Colaborativas (Futuro)
- â³ MigraciÃ³n de CapacitorStorage a Firebase/Firestore
- â³ Sistema de usuarios y autenticaciÃ³n
- â³ Compartir precios entre usuarios
- â³ Sistema de reputaciÃ³n
- â³ Confirmaciones comunitarias globales

### Fase 3: Funcionalidades Avanzadas (Futuro)
- â³ GeolocalizaciÃ³n para comercios cercanos
- â³ Notificaciones de ofertas
- â³ Historial detallado de evoluciÃ³n de precios
- â³ Sistema de favoritos y listas personalizadas
- â³ ExportaciÃ³n/importaciÃ³n de datos
- â³ GrÃ¡ficos de tendencias de precios

---

## 14. NOTAS PARA ASISTENTES DE IA

### Contexto de Este Documento
- DiseÃ±ado para comprensiÃ³n rÃ¡pida del proyecto por parte de IAs
- Proporciona visiÃ³n de alto nivel
- Para detalles tÃ©cnicos especÃ­ficos, consultar resÃºmenes por Ã¡rea:
  - Resumen2Tarjetas.txt
  - Resumen3OpenFoodFacts.txt
  - Resumen4LocalStorage.txt
  - ResumenSeccionComercios.txt

### Principios del Proyecto
1. **Nomenclatura en EspaÃ±ol:** Todo el cÃ³digo usa espaÃ±ol descriptivo
2. **Arquitectura Modular:** SeparaciÃ³n clara de responsabilidades
3. **Mobile-First:** DiseÃ±o optimizado para dispositivos mÃ³viles
4. **UX Primero:** Implementar UI antes que lÃ³gica backend
5. **Commits Incrementales:** Desarrollo paso a paso con control de versiones

### Estado Actual
- **VersiÃ³n:** MVP funcional
- **Almacenamiento:** Local (Capacitor Storage)
- **PrÃ³ximo Milestone:** BÃºsqueda inteligente local
- **PreparaciÃ³n:** Lista para migraciÃ³n a Firebase

---

## 15. INFORMACIÃ“N ADICIONAL

### Licencia
Proyecto personal de cÃ³digo propietario

### Autor
Leo (Desarrollador principal)

### Repositorio
GitHub: JLeonN/PrecioJusto

### Stack de Desarrollo
- Node.js
- Quasar CLI
- Capacitor CLI
- Git para control de versiones

---

**Ãšltima actualizaciÃ³n:** Febrero 2026
